<!-- Close button in top-right corner -->
<button mat-icon-button (click)="dialogRef.close()" class="close-icon">
    <mat-icon>close</mat-icon>
</button>

<h4>Edit Product</h4>

<form class="addProduct-container" [formGroup]="form" (ngSubmit)="onSubmit()">
    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Name</mat-label>
        <input matInput type="text" formControlName="name"
            [ngClass]="{ 'is-invalid': submitted && form.controls['name'].errors }" />
    </mat-form-field>
    <div *ngIf="submitted && form.controls['name'].hasError('required')" class="invalid-feedback">
        Name is required
    </div>

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Price</mat-label>
        <input matInput type="number" formControlName="price"
            [ngClass]="{ 'is-invalid': submitted && form.controls['price'].errors }" />
    </mat-form-field>
    <div *ngIf="submitted && form.controls['price'].hasError('required')" class="invalid-feedback">
        Price is required
    </div>
    <div *ngIf="submitted && form.controls['price'].hasError('pattern')" class="invalid-feedback">
        Price must be a valid number
    </div>

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Purchase Date</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="purchaseDate"
            [ngClass]="{ 'is-invalid': submitted && form.controls['purchaseDate'].errors }" />
        <!-- <mat-hint>MM/DD/YYYY</mat-hint> -->
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker startView="year" [startAt]="startDate"></mat-datepicker>
    </mat-form-field>
    <div *ngIf="submitted && form.controls['purchaseDate'].hasError('required')" class="invalid-feedback">
        Purchase Date is required
    </div>
    <div *ngIf="submitted && form.controls['purchaseDate'].hasError('dateOutOfRange')" class="invalid-feedback">
        Purchase Date must be between 1st August 2024 and today.
    </div>

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Quantity</mat-label>
        <input matInput type="number" formControlName="quantity"
            [ngClass]="{ 'is-invalid': submitted && form.controls['quantity'].errors }" />
    </mat-form-field>
    <div *ngIf="submitted && form.controls['quantity'].hasError('required')" class="invalid-feedback">
        Quantity is required
    </div>

    <div class="button-container">
        <button mat-flat-button color="primary" type="submit">Save</button>
        <button mat-flat-button color="warn" type="button" (click)="onReset()">Reset</button>
    </div>
</form>